<!DOCTYPE html>
<html lang="pt-PT">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Guia de Desparasita√ß√£o do Coelho</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Nature & Calm -->
    <style>
        body { font-family: 'Nunito', sans-serif; background-color: #FAFAF9; color: #1C1917; -webkit-tap-highlight-color: transparent; }
        
        /* Otimiza√ß√£o Mobile para Gr√°ficos */
        .chart-container { 
            position: relative; 
            width: 100%; 
            height: 250px; /* Altura menor para mobile */
            max-height: 400px; 
        }
        @media (min-width: 768px) {
            .chart-container { height: 350px; }
        }

        /* Cart√µes com toque moderno */
        .card { transition: transform 0.2s, box-shadow 0.2s; }
        .card:active { transform: scale(0.98); } /* Feedback t√°til */

        /* Navega√ß√£o Mobile com Scroll Horizontal */
        .nav-scroll {
            display: flex;
            overflow-x: auto;
            white-space: nowrap;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: none; /* Firefox */
        }
        .nav-scroll::-webkit-scrollbar { display: none; /* Chrome/Safari */ }

        .active-tab {
            border-bottom: 3px solid #16A34A;
            color: #16A34A;
            font-weight: 800;
        }

        .hidden-section { display: none; }
        .fade-in { animation: fadeIn 0.4s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        /* Bot√µes da Calculadora - Estilo "App" */
        .risk-btn {
            transition: all 0.2s;
            border-width: 2px;
        }
        .btn-selected {
            background-color: #DCFCE7; /* Green-100 */
            border-color: #16A34A; /* Green-600 */
            color: #14532D; /* Green-900 */
            font-weight: 800;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body class="flex flex-col min-h-screen pb-safe">

    <!-- Navigation -->
    <nav class="bg-white shadow-sm sticky top-0 z-50 border-b border-stone-100">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between h-16 items-center">
                <!-- Brand -->
                <div class="flex items-center flex-shrink-0 mr-4">
                    <span class="text-2xl mr-2">üê∞</span>
                    <h1 class="text-lg font-bold leading-tight text-stone-800">
                        CoelhoSaud√°vel
                        <span class="hidden sm:inline text-stone-400 font-light text-sm">| Investiga√ß√£o</span>
                    </h1>
                </div>
                <!-- Menu (Scrollable on mobile) -->
                <div class="nav-scroll flex space-x-6 h-16 items-center">
                    <button onclick="switchTab('dashboard')" id="nav-dashboard" class="whitespace-nowrap py-2 text-sm font-bold active-tab transition-colors">Vis√£o Geral</button>
                    <button onclick="switchTab('calculator')" id="nav-calculator" class="whitespace-nowrap py-2 text-sm font-bold text-stone-500 hover:text-green-600 transition-colors">Calculadora</button>
                    <button onclick="switchTab('analysis')" id="nav-analysis" class="whitespace-nowrap py-2 text-sm font-bold text-stone-500 hover:text-green-600 transition-colors">Dados</button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content Area -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6 w-full">

        <!-- VIEW 1: DASHBOARD (Overview) -->
        <div id="dashboard" class="fade-in space-y-6">
            
            <!-- Hero Insight -->
            <div class="bg-white rounded-3xl shadow-lg overflow-hidden border-l-8 border-green-500">
                <div class="p-6">
                    <h2 class="text-xl md:text-2xl font-extrabold text-stone-800 mb-3">Veredito: "Telmi" de rotina?</h2>
                    <p class="text-base md:text-lg text-stone-600 mb-6 leading-relaxed">
                        A resposta curta √©: <strong>Depende, mas evite dar "√†s cegas".</strong><br>
                        A desparasita√ß√£o moderna foca-se na preven√ß√£o do <em>E. cuniculi</em> e n√£o em vermes intestinais, a menos que confirmados.
                    </p>
                    <!-- Quick Stats Cards (Mobile Grid) -->
                    <div class="grid grid-cols-1 gap-3">
                        <div class="bg-stone-50 p-4 rounded-xl border border-stone-200 flex items-start">
                            <span class="text-2xl mr-3">üö´</span>
                            <div>
                                <h3 class="font-bold text-stone-800 text-sm">N√£o d√™ por dar</h3>
                                <p class="text-xs text-stone-500 mt-1">Qu√≠micos sobrecarregam o f√≠gado. Use apenas com risco confirmado.</p>
                            </div>
                        </div>
                        <div class="bg-amber-50 p-4 rounded-xl border border-amber-200 flex items-start">
                            <span class="text-2xl mr-3">‚ö†Ô∏è</span>
                            <div>
                                <h3 class="font-bold text-amber-900 text-sm">Telmi ‚â† Panacur</h3>
                                <p class="text-xs text-amber-800 mt-1">Mebendazol (Telmi) falha no parasita mais perigoso (E. cuniculi).</p>
                            </div>
                        </div>
                        <div class="bg-green-50 p-4 rounded-xl border border-green-200 flex items-start">
                            <span class="text-2xl mr-3">‚úÖ</span>
                            <div>
                                <h3 class="font-bold text-green-900 text-sm">Protocolo Gold</h3>
                                <p class="text-xs text-green-800 mt-1">Exame de fezes anual + Panacur na ado√ß√£o.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- The "Telmi" Breakdown Section -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Text Content -->
                <div class="bg-white rounded-3xl shadow-sm p-6 border border-stone-100">
                    <h3 class="text-lg font-bold text-stone-800 mb-4">A Confus√£o dos Medicamentos</h3>
                    
                    <div class="space-y-4">
                        <div class="flex items-start bg-orange-50 p-3 rounded-2xl">
                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-white flex items-center justify-center text-orange-600 font-bold shadow-sm">M</div>
                            <div class="ml-3">
                                <h4 class="text-base font-bold text-stone-800">Mebendazol ("Telmi")</h4>
                                <p class="text-xs text-stone-600 mt-1">Bom para vermes intestinais. <br><strong>Fraco</strong> contra E. cuniculi (neurol√≥gico).</p>
                            </div>
                        </div>
                        <div class="flex items-start bg-green-50 p-3 rounded-2xl">
                            <div class="flex-shrink-0 h-10 w-10 rounded-full bg-white flex items-center justify-center text-green-600 font-bold shadow-sm">F</div>
                            <div class="ml-3">
                                <h4 class="text-base font-bold text-stone-800">Fenbendazol (Panacur)</h4>
                                <p class="text-xs text-stone-600 mt-1">O preferido dos veterin√°rios. <br>Trata vermes <strong>E</strong> previne E. cuniculi.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Interactive Comparative Chart -->
                <div class="bg-white rounded-3xl shadow-sm p-6 border border-stone-100">
                    <h3 class="text-sm font-bold text-stone-400 uppercase tracking-wide mb-2 text-center">Compara√ß√£o de Efic√°cia</h3>
                    <div class="chart-container">
                        <canvas id="efficacyChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Warning Signs (Dark Mode Card) -->
            <div class="bg-stone-800 text-white rounded-3xl shadow-lg p-6">
                <h3 class="text-xl font-bold mb-2">Sintomas de Alerta üö®</h3>
                <p class="text-stone-400 text-sm mb-6">Se vir isto, corra para o veterin√°rio. N√£o medique em casa.</p>
                
                <div class="grid grid-cols-2 gap-3 mb-6">
                    <div class="bg-stone-700 p-3 rounded-xl text-center">
                        <span class="block text-2xl mb-1">ü§ï</span>
                        <span class="text-xs font-semibold">Cabe√ßa Torta</span>
                    </div>
                    <div class="bg-stone-700 p-3 rounded-xl text-center">
                        <span class="block text-2xl mb-1">üíß</span>
                        <span class="text-xs font-semibold">Beber Muito</span>
                    </div>
                    <div class="bg-stone-700 p-3 rounded-xl text-center">
                        <span class="block text-2xl mb-1">üìâ</span>
                        <span class="text-xs font-semibold">Perda Peso</span>
                    </div>
                    <div class="bg-stone-700 p-3 rounded-xl text-center">
                        <span class="block text-2xl mb-1">üí©</span>
                        <span class="text-xs font-semibold">Fezes Moles</span>
                    </div>
                </div>
                
                <button onclick="switchTab('calculator')" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-4 rounded-xl shadow-lg text-lg active:scale-95 transition-transform">
                    Verificar o meu Coelho
                </button>
            </div>
        </div>

        <!-- VIEW 2: CALCULATOR (Risk Assessment) -->
        <div id="calculator" class="hidden-section fade-in pb-10">
            <div class="max-w-3xl mx-auto">
                <div class="bg-white rounded-3xl shadow-xl overflow-hidden">
                    <div class="bg-green-600 p-6">
                        <h2 class="text-xl font-bold text-white">Calculadora de Risco</h2>
                        <p class="text-green-100 text-sm mt-1">4 perguntas r√°pidas para uma recomenda√ß√£o segura.</p>
                    </div>
                    
                    <div class="p-6 space-y-8">
                        <!-- Q1 -->
                        <div class="border-b border-stone-100 pb-6">
                            <label class="block text-base font-bold text-stone-800 mb-3">1. Acesso ao exterior?</label>
                            <div class="flex flex-col gap-3">
                                <button onclick="setRisk('outdoor', true, this)" class="risk-btn risk-btn-1 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold text-left">Sim, vai ao jardim/terra</button>
                                <button onclick="setRisk('outdoor', false, this)" class="risk-btn risk-btn-1 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold text-left">N√£o, √© 100% interior</button>
                            </div>
                        </div>

                        <!-- Q2 -->
                        <div class="border-b border-stone-100 pb-6">
                            <label class="block text-base font-bold text-stone-800 mb-2">2. Com quem vive?</label>
                            <p class="text-xs text-stone-400 mb-3">O tipo de companhia altera o risco biol√≥gico.</p>
                            <div class="grid grid-cols-1 gap-3">
                                <button onclick="setRisk('social', 'none', this)" class="risk-btn risk-btn-2 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold flex items-center">
                                    <span class="text-xl mr-3">üè†</span> Sozinho
                                </button>
                                <button onclick="setRisk('social', 'rabbits', this)" class="risk-btn risk-btn-2 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold flex items-center">
                                    <span class="text-xl mr-3">üê∞</span> Com outros Coelhos (Risco Alto)
                                </button>
                                <button onclick="setRisk('social', 'pets', this)" class="risk-btn risk-btn-2 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold flex items-center">
                                    <span class="text-xl mr-3">üê∂</span> Com C√£es ou Gatos
                                </button>
                                <button onclick="setRisk('social', 'mixed', this)" class="risk-btn risk-btn-2 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold flex items-center">
                                    <span class="text-xl mr-3">üöú</span> V√°rias Esp√©cies
                                </button>
                            </div>
                        </div>

                        <!-- Q3 -->
                        <div class="border-b border-stone-100 pb-6">
                            <label class="block text-base font-bold text-stone-800 mb-3">3. √öltima desparasita√ß√£o?</label>
                            <div class="flex flex-col gap-3">
                                <button onclick="setRisk('time', 'recent', this)" class="risk-btn risk-btn-3 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold text-left">H√° menos de 6 meses</button>
                                <button onclick="setRisk('time', 'medium', this)" class="risk-btn risk-btn-3 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold text-left">Entre 6 e 12 meses</button>
                                <button onclick="setRisk('time', 'old', this)" class="risk-btn risk-btn-3 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold text-left">H√° mais de 1 ano / Nunca</button>
                            </div>
                        </div>

                        <!-- Q4 -->
                        <div class="pb-2">
                            <label class="block text-base font-bold text-stone-800 mb-3">4. Foi adotado recentemente?</label>
                            <div class="flex flex-col gap-3">
                                <button onclick="setRisk('new', true, this)" class="risk-btn risk-btn-4 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold text-left">Sim, chegou agora a casa</button>
                                <button onclick="setRisk('new', false, this)" class="risk-btn risk-btn-4 py-4 px-4 border-stone-200 rounded-xl bg-stone-50 text-stone-600 font-semibold text-left">N√£o, j√° o tenho h√° muito</button>
                            </div>
                        </div>

                        <button onclick="calculateRecommendation()" class="w-full bg-stone-800 hover:bg-stone-900 text-white font-bold py-5 rounded-2xl text-xl shadow-lg active:scale-95 transition-transform mt-4">
                            Ver Resultado
                        </button>
                    </div>

                    <!-- Result Area -->
                    <div id="calculator-result" class="hidden bg-stone-50 p-6 border-t-2 border-dashed border-stone-300">
                        <div id="result-badge" class="inline-block px-3 py-1 rounded text-xs font-black uppercase tracking-widest mb-3"></div>
                        <div id="result-header" class="text-xl font-bold mb-3 text-stone-800"></div>
                        <p id="result-body" class="text-stone-600 text-sm mb-6 leading-relaxed"></p>
                        
                        <div class="bg-white p-5 rounded-xl border border-stone-200 shadow-sm">
                            <h4 class="font-bold text-stone-800 mb-3 uppercase text-xs tracking-wider">Plano de A√ß√£o:</h4>
                            <ul id="result-plan" class="list-disc list-inside text-stone-600 text-sm space-y-2"></ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- VIEW 3: ANALYSIS (Data) -->
        <div id="analysis" class="hidden-section fade-in space-y-6 pb-10">
            <div class="bg-white p-6 rounded-3xl shadow-sm border border-stone-100">
                <h2 class="text-xl font-bold text-stone-800 mb-3">O Perigo Invis√≠vel: <em>E. cuniculi</em></h2>
                <p class="text-stone-600 text-sm mb-6 leading-relaxed">
                    A maioria dos coelhos n√£o tem vermes vis√≠veis. O perigo real √© microsc√≥pico, afeta os rins e o c√©rebro, e n√£o sai nas fezes regularmente.
                </p>

                <div class="chart-container mb-6">
                    <canvas id="prevalenceChart"></canvas>
                </div>
                
                <div class="bg-stone-50 rounded-xl p-4 text-sm text-stone-600 border border-stone-200">
                    <p><strong>Dado Chocante:</strong> Estudos indicam que at√© 70% dos coelhos j√° foram expostos. O parasita fica "adormecido" at√© haver stress.</p>
                </div>
            </div>

            <!-- Parasite Cards (Mobile Optimized) -->
            <h3 class="text-lg font-bold text-stone-800 px-2">Conhe√ßa os Inimigos</h3>
            <div class="grid grid-cols-1 gap-4">
                <!-- Card 1 -->
                <div class="card bg-white rounded-2xl overflow-hidden shadow-sm border border-stone-100">
                    <div class="bg-purple-100 p-3 flex justify-between items-center">
                        <h4 class="font-bold text-purple-900">E. cuniculi</h4>
                        <span class="text-xl">üß†</span>
                    </div>
                    <div class="p-4">
                        <p class="text-xs text-stone-600 mb-3">Ataca c√©rebro e rins.</p>
                        <div class="flex justify-between items-end">
                            <div>
                                <div class="text-[10px] uppercase text-stone-400 font-bold">Tratamento</div>
                                <div class="text-purple-700 font-bold text-sm">Panacur (28 dias)</div>
                            </div>
                            <div class="text-right">
                                <div class="text-[10px] uppercase text-stone-400 font-bold">Efic√°cia Telmi</div>
                                <span class="text-red-500 font-bold text-xs">Fraca</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 2 -->
                <div class="card bg-white rounded-2xl overflow-hidden shadow-sm border border-stone-100">
                    <div class="bg-blue-100 p-3 flex justify-between items-center">
                        <h4 class="font-bold text-blue-900">Cocc√≠dias</h4>
                        <span class="text-xl">ü¶†</span>
                    </div>
                    <div class="p-4">
                        <p class="text-xs text-stone-600 mb-3">Diarreia grave em jovens.</p>
                        <div class="flex justify-between items-end">
                            <div>
                                <div class="text-[10px] uppercase text-stone-400 font-bold">Tratamento</div>
                                <div class="text-blue-700 font-bold text-sm">Baycox</div>
                            </div>
                            <div class="text-right">
                                <div class="text-[10px] uppercase text-stone-400 font-bold">Efic√°cia Telmi</div>
                                <span class="text-red-500 font-bold text-xs">Zero</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Card 3 -->
                <div class="card bg-white rounded-2xl overflow-hidden shadow-sm border border-stone-100">
                    <div class="bg-orange-100 p-3 flex justify-between items-center">
                        <h4 class="font-bold text-orange-900">Oxi√∫ros</h4>
                        <span class="text-xl">ü™±</span>
                    </div>
                    <div class="p-4">
                        <p class="text-xs text-stone-600 mb-3">Vermes vis√≠veis.</p>
                        <div class="flex justify-between items-end">
                            <div>
                                <div class="text-[10px] uppercase text-stone-400 font-bold">Tratamento</div>
                                <div class="text-orange-700 font-bold text-sm">Panacur ou Telmi</div>
                            </div>
                            <div class="text-right">
                                <div class="text-[10px] uppercase text-stone-400 font-bold">Efic√°cia Telmi</div>
                                <span class="text-green-500 font-bold text-xs">Boa</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Footer -->
    <footer class="bg-stone-900 text-stone-400 py-8 px-4 text-center">
        <p class="text-xs leading-relaxed max-w-lg mx-auto">
            ‚ö†Ô∏è <strong>Aviso:</strong> Ferramenta informativa.<br>
            Consulte sempre um veterin√°rio de ex√≥ticos. Dosagens incorretas podem ser fatais.
        </p>
    </footer>

    <!-- Logic -->
    <script>
        // State
        const state = {
            riskAnswers: { outdoor: null, social: null, time: null, new: null },
            currentTab: 'dashboard'
        };

        // Navigation
        function switchTab(tabId) {
            document.querySelectorAll('main > div').forEach(el => el.classList.add('hidden-section'));
            document.getElementById(tabId).classList.remove('hidden-section');
            
            // Reset Nav Styles
            ['dashboard', 'calculator', 'analysis'].forEach(id => {
                const btn = document.getElementById('nav-' + id);
                btn.classList.remove('active-tab');
                btn.classList.add('text-stone-500');
            });

            // Set Active
            const activeBtn = document.getElementById('nav-' + tabId);
            activeBtn.classList.add('active-tab');
            activeBtn.classList.remove('text-stone-500');

            // Scroll to top
            window.scrollTo(0, 0);

            // Chart triggers
            if (tabId === 'dashboard') updateEfficacyChart();
            if (tabId === 'analysis') updatePrevalenceChart();
        }

        // Calculator Interaction
        function setRisk(key, value, btnElement) {
            state.riskAnswers[key] = value;
            
            // UI Feedback
            let groupClass;
            if (key === 'time') groupClass = '.risk-btn-3';
            else if (key === 'outdoor') groupClass = '.risk-btn-1';
            else if (key === 'social') groupClass = '.risk-btn-2';
            else groupClass = '.risk-btn-4';

            document.querySelectorAll(groupClass).forEach(btn => {
                btn.classList.remove('btn-selected');
                btn.classList.add('bg-stone-50', 'text-stone-600', 'border-stone-200');
            });

            btnElement.classList.remove('bg-stone-50', 'text-stone-600', 'border-stone-200');
            btnElement.classList.add('btn-selected');
        }

        function calculateRecommendation() {
            const answers = state.riskAnswers;
            const resultDiv = document.getElementById('calculator-result');
            const badge = document.getElementById('result-badge');
            const header = document.getElementById('result-header');
            const body = document.getElementById('result-body');
            const plan = document.getElementById('result-plan');

            if (Object.values(answers).includes(null)) {
                alert("Por favor, responda a todas as perguntas.");
                return;
            }

            resultDiv.classList.remove('hidden');
            // Scroll to result smoothly
            resultDiv.scrollIntoView({ behavior: 'smooth', block: 'start' });
            
            plan.innerHTML = ''; 

            // Logic (V2 Logic)
            let score = 0;
            if (answers.outdoor) score += 2;
            if (answers.social === 'rabbits') score += 4; // High risk co-living
            else if (answers.social === 'pets') score += 1;
            else if (answers.social === 'mixed') score += 4;
            if (answers.new) score += 3;
            if (answers.time === 'medium') score += 1; // 6-12 mo
            if (answers.time === 'old') score += 2; // >1 yr

            if (answers.new) {
                // New Rabbit
                badge.className = "inline-block px-3 py-1 rounded text-xs font-black uppercase tracking-widest mb-3 bg-green-100 text-green-800";
                badge.textContent = "Protocolo de Chegada";
                header.textContent = "Aten√ß√£o Total Necess√°ria";
                body.textContent = "Mudan√ßas de casa baixam a imunidade. √â o momento cr√≠tico para parasitas.";
                
                addPlanItem(plan, "Panacur (Fenbendazol) durante 28 dias.");
                addPlanItem(plan, "Recolha fezes (3 dias) para pesquisar cocc√≠dias.");
                addPlanItem(plan, "Quarentena antes de juntar com outros.");

            } else if (score >= 4) {
                // High Risk
                badge.className = "inline-block px-3 py-1 rounded text-xs font-black uppercase tracking-widest mb-3 bg-red-100 text-red-800";
                badge.textContent = "Risco Elevado";
                header.textContent = "Alta Vigil√¢ncia";
                
                const reason = answers.social === 'rabbits' ? "O conv√≠vio com outros coelhos √© a via n¬∫ 1 de cont√°gio." : "V√°rios fatores de risco detetados.";
                body.innerHTML = `O seu coelho tem risco significativo. <br><strong>Motivo:</strong> ${reason}`;
                
                addPlanItem(plan, "Ciclo preventivo de E. cuniculi a cada 6 meses.");
                addPlanItem(plan, "Exame de fezes semestral.");
                addPlanItem(plan, "Tratar todos os coelhos da casa ao mesmo tempo.");

            } else if (answers.time === 'medium') {
                // Medium Risk (Gap)
                badge.className = "inline-block px-3 py-1 rounded text-xs font-black uppercase tracking-widest mb-3 bg-blue-100 text-blue-800";
                badge.textContent = "Manuten√ß√£o";
                header.textContent = "Check-up Recomendado";
                body.textContent = "Passaram 6 a 12 meses. O risco √© moderado, mas vale a pena confirmar.";

                addPlanItem(plan, "Exame de fezes antes de dar qualquer qu√≠mico.");
                addPlanItem(plan, "N√£o d√™ desparasitante '√†s cegas'.");

            } else {
                // Low Risk
                badge.className = "inline-block px-3 py-1 rounded text-xs font-black uppercase tracking-widest mb-3 bg-stone-200 text-stone-600";
                badge.textContent = "Baixo Risco";
                header.textContent = "Tudo Est√°vel";
                body.textContent = "Coelho de interior, sem novos contactos e protegido.";

                addPlanItem(plan, "N√£o fazer nada por agora.");
                addPlanItem(plan, "Apenas check-up anual habitual.");
            }
        }

        function addPlanItem(list, text) {
            const li = document.createElement('li');
            li.textContent = text;
            list.appendChild(li);
        }

        // Charts
        let efficacyChartInstance = null;
        let prevalenceChartInstance = null;

        function updateEfficacyChart() {
            const ctx = document.getElementById('efficacyChart').getContext('2d');
            if (efficacyChartInstance) return;

            efficacyChartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: ['Vermes', 'E. cuniculi', 'Cocc√≠dias'],
                    datasets: [
                        { label: 'Telmi (Mebendazol)', data: [90, 20, 0], backgroundColor: '#fbbf24' }, // Amber-400
                        { label: 'Panacur (Fenbendazol)', data: [95, 95, 0], backgroundColor: '#4ade80' } // Green-400
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: { y: { beginAtZero: true, max: 100, display: false }, x: { grid: { display: false } } },
                    plugins: { legend: { position: 'bottom' } }
                }
            });
        }

        function updatePrevalenceChart() {
            const ctx = document.getElementById('prevalenceChart').getContext('2d');
            if (prevalenceChartInstance) return;

            prevalenceChartInstance = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Expostos', 'Limpos'],
                    datasets: [{
                        data: [70, 30],
                        backgroundColor: ['#f87171', '#e5e7eb'], // Red-400, Gray-200
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: { legend: { position: 'bottom' } }
                }
            });
        }

        window.onload = () => updateEfficacyChart();
    </script>
</body>
</html>
